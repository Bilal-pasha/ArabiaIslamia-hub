{
    email admin@jamiaarabiaislamia.com
}

# Main website API: https://api.jamiaarabiaislamia.com (backend for main site)
# Uncomment when main-website-api is added to docker-compose.prod.yml
# api.jamiaarabiaislamia.com {
#     reverse_proxy main-website-api:8000 {
#         health_uri /health
#         health_interval 30s
#     }
#     encode gzip zstd
#     header {
#         X-Frame-Options "DENY"
#         X-Content-Type-Options "nosniff"
#         -Server
#     }
#     log {
#         output file /var/log/caddy/api-main.log
#         format json
#     }
# }

# Main website: https://jamiaarabiaislamia.com
jamiaarabiaislamia.com {
    reverse_proxy main-website:3000
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/main.log
        format json
    }
}

# Huffaz API: https://api.huffaz.jamiaarabiaislamia.com
# Uncomment when huffaz-api is added to docker-compose.prod.yml
# api.huffaz.jamiaarabiaislamia.com {
#     reverse_proxy huffaz-api:8001 {
#         health_uri /health
#         health_interval 30s
#     }
#     encode gzip zstd
#     header {
#         X-Frame-Options "DENY"
#         X-Content-Type-Options "nosniff"
#         -Server
#     }
#     log {
#         output file /var/log/caddy/api-huffaz.log
#         format json
#     }
# }

# Huffaz UI: https://huffaz.jamiaarabiaislamia.com
# Uncomment when huffaz-app is added to docker-compose.prod.yml
# huffaz.jamiaarabiaislamia.com {
#     reverse_proxy huffaz-app:3001
#     encode gzip zstd
#     header {
#         X-Frame-Options "DENY"
#         X-Content-Type-Options "nosniff"
#         -Server
#     }
#     log {
#         output file /var/log/caddy/huffaz.log
#         format json
#     }
# }

# Secondary API: https://api.secondary.jamiaarabiaislamia.com
api.secondary.jamiaarabiaislamia.com {
    reverse_proxy secondary-api:8002 {
        health_uri /health
        health_interval 30s
    }
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/api-secondary.log
        format json
    }
}

# Secondary UI: https://secondary.jamiaarabiaislamia.com
secondary.jamiaarabiaislamia.com {
    reverse_proxy secondary-app:3011
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/secondary.log
        format json
    }
}

# Scouts Portal API: https://api.scouts.jamiaarabiaislamia.com
api.scouts.jamiaarabiaislamia.com {
    reverse_proxy scouts-portal-api:8003 {
        health_uri /health
        health_interval 30s
    }
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/api-scouts.log
        format json
    }
}

# Scouts Portal UI: https://portal.scouts.jamiaarabiaislamia.com
portal.scouts.jamiaarabiaislamia.com {
    reverse_proxy scouts-portal-app:3012
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/scouts-portal.log
        format json
    }
}
