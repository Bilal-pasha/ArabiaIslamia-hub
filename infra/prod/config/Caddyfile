{
    email admin@jamiaarabiaislamia.com
}

# Main website API: https://api.jamiaarabiaislamia.com (backend for main site)
# Add main-website-api service to docker-compose.prod.yml when you have a backend
api.jamiaarabiaislamia.com {
    reverse_proxy main-website-api:8000 {
        health_uri /health
        health_interval 30s
    }
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/api-main.log
        format json
    }
}

# Main website: https://jamiaarabiaislamia.com
jamiaarabiaislamia.com {
    reverse_proxy main-website:3000
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/main.log
        format json
    }
}

# Huffaz API: https://api.huffaz.jamiaarabiaislamia.com
api.huffaz.jamiaarabiaislamia.com {
    reverse_proxy huffaz-api:8001 {
        health_uri /health
        health_interval 30s
    }
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/api-huffaz.log
        format json
    }
}

# Huffaz UI: https://huffaz.jamiaarabiaislamia.com
huffaz.jamiaarabiaislamia.com {
    reverse_proxy huffaz-app:3001
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/huffaz.log
        format json
    }
}

# Secondary API: https://api.secondary.jamiaarabiaislamia.com
api.secondary.jamiaarabiaislamia.com {
    reverse_proxy secondary-api:8002 {
        health_uri /health
        health_interval 30s
    }
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/api-secondary.log
        format json
    }
}

# Secondary UI: https://secondary.jamiaarabiaislamia.com
secondary.jamiaarabiaislamia.com {
    reverse_proxy secondary-app:3011
    encode gzip zstd
    header {
        X-Frame-Options "DENY"
        X-Content-Type-Options "nosniff"
        -Server
    }
    log {
        output file /var/log/caddy/secondary.log
        format json
    }
}
